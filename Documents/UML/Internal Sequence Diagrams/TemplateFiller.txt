@startuml

title \n\n <font color = black><size:24> TEMPLATEFILLER \n <font color = black><size:12> INTERNAL SEQUENCE DIAGRAM \n\n

participant "**TemplateFiller**" #dodgerblue

activate "**TemplateFiller**" #dodgerblue

"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : controlla se il template Ã¨ nullo o vuoto
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : estrae il conteggio parole (sostantivi, verbi, aggettivi)\ndai metadati usando regex
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : estrae la base della frase (dopo ". ", prima di " | ")
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : verifica se ci sono abbastanza parole

alt mancano sostantivi
loop aggiungi sostantivi mancanti
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : genera e aggiunge nuovo sostantivo
end
end

alt mancano verbi
loop aggiungi verbi mancanti
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : genera e aggiunge nuovo verbo
end
end

alt mancano aggettivi
loop aggiungi aggettivi mancanti
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : genera e aggiunge nuovo aggettivo
end
end

"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : mescola sostantivi, verbi, aggettivi

alt se il tempo == "past" (passato)
loop per ogni verbo
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : ottieni la forma passata dalla mappa\no usa verbo + "ed" come fallback
end
end

alt se il tempo == "future" (futuro)
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : antepone \"will\" ai verbi (eccetto \"is\", \"are\")
end

"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : sostituisce i segnaposto [noun]
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : sostituisce i segnaposto [verb]
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : sostituisce i segnaposto [adjective]

deactivate "**TemplateFiller**"

@enduml