@startuml

title \n\n <font color = black><size:40> SYSTEM SEQUENCE DIAGRAM \n\n

actor "**User**" #black
participant "**NonsenseApplication**" as Controller #dodgerblue
participant "**SyntaxAnalyzer**" #dodgerblue
participant "**TemplateSelector**" #dodgerblue
participant "**TemplateFiller**" #dodgerblue
participant "**Noun**" #dodgerblue
participant "**Adjective**" #dodgerblue
participant "**Verb**" #dodgerblue
"**User**" -[#blue]> Controller : invia sentence
activate Controller #dodgerblue

alt Sentence provided
Controller -[#blue]> "**SyntaxAnalyzer**" : analyzeSyntax(Sentence)
Controller <-[#blue]- "**SyntaxAnalyzer**" : SyntaxResult(nouns, verbs, adjectuves)
end
alt Template selected
Controller -[#blue]> "**TemplateSelector**" : usa template fornito
else
Controller -[#blue]> "**TemplateSelector**" : selectCompatibleTemplate(nouns, verbs, adjectives, TEMPLATES_FILE_PATH)
Controller <-[#blue]- "**TemplateSelector**" : templateToUse
end
Controller -[#blue]> "**TemplateFiller**" : fill(templateToUse, nouns, verbs, adjectives, tense, pastTenseVerbs)
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : analizza template per conteggi [noun, verb, adjective]

alt if mancano nouns
loop while nouns.size < required
"**TemplateFiller**" -[#blue]> "**Noun**" : new Noun()
"**TemplateFiller**" <[#blue]- "**Noun**": getWord()
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : aggiunge word a nouns
end
end

alt if mancano verbs
loop while verbs.size < required
"**TemplateFiller**" -[#blue]> "**Verb**" : new Verb()
"**Verb**" -[#blue]> "**TemplateFiller**" : getWord()
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : aggiunge word a verbs
end
end

alt if missing adjectives
loop while adjectives.size < required
"**TemplateFiller**" -[#blue]> "**Adjective**" : new Adjective()
"**TemplateFiller**" <[#blue]- "**Adjective**": getWord()
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : aggiunge word a adjectives
end
end

"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : mescola tutte le word lists

alt tense = "past"
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : converte ogni verb usando pastTenseMap o fallback
else tense = "future"
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : antepone "will" or use "will be"
else
"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : usa verbs come sono (present)
end

"**TemplateFiller**" -[#blue]> "**TemplateFiller**" : sostituisce [noun], [verb], [adjective]

Controller <-[#blue]- "**TemplateFiller**" : sentenceOut
"**User**" <-[#blue]- Controller : riceve sentenceOut

@enduml